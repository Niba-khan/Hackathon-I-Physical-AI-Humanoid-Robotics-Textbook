"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook=globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook||[]).push([[822],{4335:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>s,contentTitle:()=>r,default:()=>m,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var t=i(4848),a=i(8453);const o={},r="Chapter 3: Python Agents \u2192 ROS 2 Control with rclpy + Intro to URDF",l={id:"content/modules/ros2-fundamentals/chapter-3",title:"Chapter 3: Python Agents \u2192 ROS 2 Control with rclpy + Intro to URDF",description:"Objectives",source:"@site/docs/content/modules/001-ros2-fundamentals/chapter-3.md",sourceDirName:"content/modules/001-ros2-fundamentals",slug:"/content/modules/ros2-fundamentals/chapter-3",permalink:"/hackathon-textbook/docs/content/modules/ros2-fundamentals/chapter-3",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/content/modules/001-ros2-fundamentals/chapter-3.md",tags:[],version:"current",frontMatter:{},sidebar:"textbookSidebar",previous:{title:"Chapter 2: Hands-on with Nodes, Publishers, Subscribers, Services, Message Flow",permalink:"/hackathon-textbook/docs/content/modules/ros2-fundamentals/chapter-2"},next:{title:"Module 1 Validation Checklist",permalink:"/hackathon-textbook/docs/content/modules/ros2-fundamentals/checklists/validation-checklist"}},s={},d=[{value:"Objectives",id:"objectives",level:2},{value:"Introduction to Python Agents with ROS 2",id:"introduction-to-python-agents-with-ros-2",level:2},{value:"Creating a Python Agent for Robot Control",id:"creating-a-python-agent-for-robot-control",level:2},{value:"Understanding URDF (Unified Robot Description Format)",id:"understanding-urdf-unified-robot-description-format",level:2},{value:"Modifying a Simple Humanoid URDF",id:"modifying-a-simple-humanoid-urdf",level:2},{value:"Modifying the URDF",id:"modifying-the-urdf",level:2},{value:"Hands-on Exercise 3.1: Complete Python Agent Implementation",id:"hands-on-exercise-31-complete-python-agent-implementation",level:2},{value:"Hands-on Exercise 3.2: URDF Modification Task",id:"hands-on-exercise-32-urdf-modification-task",level:2},{value:"Validation Checklist",id:"validation-checklist",level:2},{value:"Summary",id:"summary",level:2}];function c(n){const e={code:"code",h1:"h1",h2:"h2",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h1,{id:"chapter-3-python-agents--ros-2-control-with-rclpy--intro-to-urdf",children:"Chapter 3: Python Agents \u2192 ROS 2 Control with rclpy + Intro to URDF"}),"\n",(0,t.jsx)(e.h2,{id:"objectives",children:"Objectives"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Create a Python agent that interfaces with ROS 2 using rclpy"}),"\n",(0,t.jsx)(e.li,{children:"Understand the structure and purpose of URDF in robot modeling"}),"\n",(0,t.jsx)(e.li,{children:"Modify a simple humanoid URDF file"}),"\n",(0,t.jsx)(e.li,{children:"Implement a complete Python agent that controls a simulated humanoid robot"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"introduction-to-python-agents-with-ros-2",children:"Introduction to Python Agents with ROS 2"}),"\n",(0,t.jsxs)(e.p,{children:["A Python agent in the context of robotics is a program written in Python that can perceive its environment (through sensors), make decisions, and act upon the world (through actuators). With ROS 2's ",(0,t.jsx)(e.code,{children:"rclpy"})," client library, Python becomes a powerful choice for creating various types of robotic agents, from high-level decision makers to direct controller interfaces."]}),"\n",(0,t.jsx)(e.p,{children:"Python agents are particularly useful for:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"High-level planning and decision making"}),"\n",(0,t.jsx)(e.li,{children:"Prototyping and testing algorithms"}),"\n",(0,t.jsx)(e.li,{children:"Human-robot interaction interfaces"}),"\n",(0,t.jsx)(e.li,{children:"Data analysis and visualization"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"creating-a-python-agent-for-robot-control",children:"Creating a Python Agent for Robot Control"}),"\n",(0,t.jsx)(e.p,{children:"Let's build a Python agent that acts as a high-level controller for our humanoid robot. This agent will receive sensor data, make decisions, and send commands to the robot's actuators."}),"\n",(0,t.jsx)(e.p,{children:"First, create a new package for our agent:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"cd ~/humanoid_ws/src\nros2 pkg create --build-type ament_python humanoid_agent\n"})}),"\n",(0,t.jsxs)(e.p,{children:["Now, let's create a Python agent that implements a simple state machine for walking control. Create ",(0,t.jsx)(e.code,{children:"humanoid_agent/humanoid_agent/walking_agent.py"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:'import rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import JointState\nfrom sensor_msgs.msg import Imu\nfrom geometry_msgs.msg import Twist\nfrom std_msgs.msg import Float64MultiArray\nimport numpy as np\nimport math\n\nclass WalkingAgent(Node):\n    def __init__(self):\n        super().__init__(\'walking_agent\')\n        \n        # Subscribers for sensor data\n        self.joint_state_sub = self.create_subscription(\n            JointState, \n            \'/joint_states\', \n            self.joint_state_callback, \n            10\n        )\n        \n        self.imu_sub = self.create_subscription(\n            Imu, \n            \'/imu/data\', \n            self.imu_callback, \n            10\n        )\n        \n        # Publisher for velocity commands\n        self.cmd_vel_pub = self.create_publisher(\n            Twist, \n            \'/cmd_vel\', \n            10\n        )\n        \n        # Publisher for joint position commands\n        self.joint_cmd_pub = self.create_publisher(\n            Float64MultiArray, \n            \'/joint_commands\', \n            10\n        )\n        \n        # Timer for control loop\n        self.control_timer = self.create_timer(0.05, self.control_loop)  # 20 Hz\n        \n        # Internal state\n        self.current_joint_states = None\n        self.current_imu_data = None\n        self.robot_state = "STANDING"  # STANDING, WALKING_FORWARD, WALKING_BACKWARD, TURNING\n        self.step_phase = 0.0  # Phase of the walking cycle (0 to 2\u03c0)\n        \n    def joint_state_callback(self, msg):\n        self.current_joint_states = msg\n        \n    def imu_callback(self, msg):\n        self.current_imu_data = msg\n    \n    def control_loop(self):\n        """Main control loop for the walking agent"""\n        if self.current_joint_states is None or self.current_imu_data is None:\n            return\n            \n        # Decision making based on sensor data and desired behavior\n        self.make_decision()\n        \n        # Generate appropriate commands based on current state\n        commands = self.generate_commands()\n        \n        # Publish commands\n        self.cmd_vel_pub.publish(commands[\'twist\'])\n        self.joint_cmd_pub.publish(commands[\'joint_commands\'])\n    \n    def make_decision(self):\n        """Make high-level decisions based on sensor data"""\n        # Example: If IMU indicates too much tilt, go to recovery state\n        if self.current_imu_data is not None:\n            orientation_z = self.current_imu_data.orientation.z\n            if abs(orientation_z) > 0.3:  # If tilt is too high\n                self.robot_state = "RECOVERY"\n                return\n        \n        # For this example, we\'ll set a simple walking pattern\n        # In a more complex agent, this would involve path planning, obstacle detection, etc.\n        self.robot_state = "WALKING_FORWARD"\n    \n    def generate_commands(self):\n        """Generate commands based on current state"""\n        twist_cmd = Twist()\n        joint_cmd = Float64MultiArray()\n        \n        if self.robot_state == "WALKING_FORWARD":\n            # Set forward velocity\n            twist_cmd.linear.x = 0.5\n            twist_cmd.angular.z = 0.0  # No turning\n            \n            # Generate walking gait pattern for joints\n            # This is a simplified example - real humanoid walking is much more complex\n            self.step_phase += 0.1  # Advance the walking cycle\n            if self.step_phase > 2 * math.pi:\n                self.step_phase = 0.0\n                \n            # Generate joint positions for a simple walking pattern\n            joint_positions = self.generate_walking_pattern()\n            joint_cmd.data = joint_positions\n            \n        elif self.robot_state == "RECOVERY":\n            # Stop movement and try to regain balance\n            twist_cmd.linear.x = 0.0\n            twist_cmd.angular.z = 0.0\n            \n            # Go to a safe standing position\n            joint_cmd.data = [0.0] * 6  # 6 joints, all to neutral position\n            \n        else:  # STANDING\n            twist_cmd.linear.x = 0.0\n            twist_cmd.angular.z = 0.0\n            joint_cmd.data = [0.0] * 6  # 6 joints, all to neutral position\n            \n        return {\'twist\': twist_cmd, \'joint_commands\': joint_cmd}\n    \n    def generate_walking_pattern(self):\n        """Generate a simple walking pattern for humanoid joints"""\n        # This is a very simplified walking pattern\n        # Real humanoid walking requires complex inverse kinematics and dynamics\n        \n        # Calculate joint positions based on step phase\n        left_hip = 0.1 * math.sin(self.step_phase)\n        left_knee = 0.05 * math.sin(self.step_phase * 2)\n        left_ankle = -0.1 * math.sin(self.step_phase)\n        \n        right_hip = 0.1 * math.sin(self.step_phase + math.pi)  # Opposite phase\n        right_knee = 0.05 * math.sin(self.step_phase * 2 + math.pi)\n        right_ankle = -0.1 * math.sin(self.step_phase + math.pi)\n        \n        return [left_hip, left_knee, left_ankle, right_hip, right_knee, right_ankle]\n\ndef main(args=None):\n    rclpy.init(args=args)\n    agent = WalkingAgent()\n    \n    try:\n        rclpy.spin(agent)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        agent.destroy_node()\n        rclpy.shutdown()\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,t.jsx)(e.h2,{id:"understanding-urdf-unified-robot-description-format",children:"Understanding URDF (Unified Robot Description Format)"}),"\n",(0,t.jsx)(e.p,{children:"URDF (Unified Robot Description Format) is an XML-based format for representing a robot model. For humanoid robots, URDF defines:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Physical structure (links)"}),"\n",(0,t.jsx)(e.li,{children:"Joint connections and types"}),"\n",(0,t.jsx)(e.li,{children:"Inertial properties"}),"\n",(0,t.jsx)(e.li,{children:"Visual and collision properties"}),"\n",(0,t.jsx)(e.li,{children:"Sensor mounting points"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"A basic URDF for a simplified humanoid leg would look like:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<robot name="simple_humanoid_leg">\n  \x3c!-- Base link --\x3e\n  <link name="base_link">\n    <visual>\n      <geometry>\n        <cylinder length="0.1" radius="0.05"/>\n      </geometry>\n      <material name="blue">\n        <color rgba="0 0 1 1"/>\n      </material>\n    </visual>\n    <collision>\n      <geometry>\n        <cylinder length="0.1" radius="0.05"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="1.0"/>\n      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Hip joint --\x3e\n  <joint name="hip_joint" type="revolute">\n    <parent link="base_link"/>\n    <child link="thigh_link"/>\n    <origin xyz="0 0 -0.1" rpy="0 0 0"/>\n    <axis xyz="0 0 1"/>\n    <limit lower="-1.57" upper="1.57" effort="100" velocity="1"/>\n  </joint>\n\n  \x3c!-- Thigh link --\x3e\n  <link name="thigh_link">\n    <visual>\n      <geometry>\n        <cylinder length="0.4" radius="0.04"/>\n      </geometry>\n      <material name="red">\n        <color rgba="1 0 0 1"/>\n      </material>\n    </visual>\n    <collision>\n      <geometry>\n        <cylinder length="0.4" radius="0.04"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="2.0"/>\n      <inertia ixx="0.05" ixy="0" ixz="0" iyy="0.05" iyz="0" izz="0.01"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Knee joint --\x3e\n  <joint name="knee_joint" type="revolute">\n    <parent link="thigh_link"/>\n    <child link="shank_link"/>\n    <origin xyz="0 0 -0.4" rpy="0 0 0"/>\n    <axis xyz="0 0 1"/>\n    <limit lower="0" upper="2.35" effort="100" velocity="1"/>\n  </joint>\n\n  \x3c!-- Shank (lower leg) link --\x3e\n  <link name="shank_link">\n    <visual>\n      <geometry>\n        <cylinder length="0.4" radius="0.03"/>\n      </geometry>\n      <material name="green">\n        <color rgba="0 1 0 1"/>\n      </material>\n    </visual>\n    <collision>\n      <geometry>\n        <cylinder length="0.4" radius="0.03"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="1.5"/>\n      <inertia ixx="0.03" ixy="0" ixz="0" iyy="0.03" iyz="0" izz="0.01"/>\n    </inertial>\n  </link>\n</robot>\n'})}),"\n",(0,t.jsx)(e.h2,{id:"modifying-a-simple-humanoid-urdf",children:"Modifying a Simple Humanoid URDF"}),"\n",(0,t.jsxs)(e.p,{children:["Now, let's create and modify a simple humanoid URDF file. Create ",(0,t.jsx)(e.code,{children:"humanoid_agent/urdf/simple_humanoid.urdf"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<robot name="simple_humanoid">\n  \x3c!-- Base/Body of the robot --\x3e\n  <link name="base_link">\n    <visual>\n      <geometry>\n        <box size="0.3 0.2 0.5"/>\n      </geometry>\n      <material name="light_grey">\n        <color rgba="0.7 0.7 0.7 1"/>\n      </material>\n    </visual>\n    <collision>\n      <geometry>\n        <box size="0.3 0.2 0.5"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="10.0"/>\n      <inertia ixx="1.0" ixy="0" ixz="0" iyy="1.0" iyz="0" izz="1.0"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Head --\x3e\n  <joint name="neck_joint" type="revolute">\n    <parent link="base_link"/>\n    <child link="head_link"/>\n    <origin xyz="0 0 0.35" rpy="0 0 0"/>\n    <axis xyz="0 1 0"/>\n    <limit lower="-0.785" upper="0.785" effort="10" velocity="1"/>\n  </joint>\n\n  <link name="head_link">\n    <visual>\n      <geometry>\n        <sphere radius="0.1"/>\n      </geometry>\n      <material name="white">\n        <color rgba="1 1 1 1"/>\n      </material>\n    </visual>\n    <collision>\n      <geometry>\n        <sphere radius="0.1"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="2.0"/>\n      <inertia ixx="0.04" ixy="0" ixz="0" iyy="0.04" iyz="0" izz="0.04"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Left Arm --\x3e\n  <joint name="left_shoulder_joint" type="revolute">\n    <parent link="base_link"/>\n    <child link="left_upper_arm"/>\n    <origin xyz="0.2 0 0.1" rpy="0 0 0"/>\n    <axis xyz="0 1 0"/>\n    <limit lower="-1.57" upper="1.57" effort="10" velocity="1"/>\n  </joint>\n\n  <link name="left_upper_arm">\n    <visual>\n      <geometry>\n        <cylinder length="0.3" radius="0.05"/>\n      </geometry>\n      <material name="blue">\n        <color rgba="0 0 1 1"/>\n      </material>\n    </visual>\n    <collision>\n      <geometry>\n        <cylinder length="0.3" radius="0.05"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="1.0"/>\n      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.005"/>\n    </inertial>\n  </link>\n\n  <joint name="left_elbow_joint" type="revolute">\n    <parent link="left_upper_arm"/>\n    <child link="left_lower_arm"/>\n    <origin xyz="0 0 -0.3" rpy="0 0 0"/>\n    <axis xyz="0 1 0"/>\n    <limit lower="-1.57" upper="1.57" effort="10" velocity="1"/>\n  </joint>\n\n  <link name="left_lower_arm">\n    <visual>\n      <geometry>\n        <cylinder length="0.25" radius="0.04"/>\n      </geometry>\n      <material name="blue">\n        <color rgba="0 0 1 1"/>\n      </material>\n    </visual>\n    <collision>\n      <geometry>\n        <cylinder length="0.25" radius="0.04"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="0.8"/>\n      <inertia ixx="0.008" ixy="0" ixz="0" iyy="0.008" iyz="0" izz="0.004"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Left Leg --\x3e\n  <joint name="left_hip_joint" type="revolute">\n    <parent link="base_link"/>\n    <child link="left_upper_leg"/>\n    <origin xyz="-0.1 0 -0.25" rpy="0 0 0"/>\n    <axis xyz="0 0 1"/>\n    <limit lower="-1.57" upper="1.57" effort="50" velocity="1"/>\n  </joint>\n\n  <link name="left_upper_leg">\n    <visual>\n      <geometry>\n        <cylinder length="0.4" radius="0.06"/>\n      </geometry>\n      <material name="red">\n        <color rgba="1 0 0 1"/>\n      </material>\n    </visual>\n    <collision>\n      <geometry>\n        <cylinder length="0.4" radius="0.06"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="3.0"/>\n      <inertia ixx="0.04" ixy="0" ixz="0" iyy="0.04" iyz="0" izz="0.01"/>\n    </inertial>\n  </link>\n\n  <joint name="left_knee_joint" type="revolute">\n    <parent link="left_upper_leg"/>\n    <child link="left_lower_leg"/>\n    <origin xyz="0 0 -0.4" rpy="0 0 0"/>\n    <axis xyz="0 0 1"/>\n    <limit lower="0" upper="2.35" effort="50" velocity="1"/>\n  </joint>\n\n  <link name="left_lower_leg">\n    <visual>\n      <geometry>\n        <cylinder length="0.4" radius="0.05"/>\n      </geometry>\n      <material name="red">\n        <color rgba="1 0 0 1"/>\n      </material>\n    </visual>\n    <collision>\n      <geometry>\n        <cylinder length="0.4" radius="0.05"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="2.5"/>\n      <inertia ixx="0.03" ixy="0" ixz="0" iyy="0.03" iyz="0" izz="0.01"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Right Leg (similar to left, mirrored) --\x3e\n  <joint name="right_hip_joint" type="revolute">\n    <parent link="base_link"/>\n    <child link="right_upper_leg"/>\n    <origin xyz="0.1 0 -0.25" rpy="0 0 0"/>\n    <axis xyz="0 0 1"/>\n    <limit lower="-1.57" upper="1.57" effort="50" velocity="1"/>\n  </joint>\n\n  <link name="right_upper_leg">\n    <visual>\n      <geometry>\n        <cylinder length="0.4" radius="0.06"/>\n      </geometry>\n      <material name="red">\n        <color rgba="1 0 0 1"/>\n      </material>\n    </visual>\n    <collision>\n      <geometry>\n        <cylinder length="0.4" radius="0.06"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="3.0"/>\n      <inertia ixx="0.04" ixy="0" ixz="0" iyy="0.04" iyz="0" izz="0.01"/>\n    </inertial>\n  </link>\n\n  <joint name="right_knee_joint" type="revolute">\n    <parent link="right_upper_leg"/>\n    <child link="right_lower_leg"/>\n    <origin xyz="0 0 -0.4" rpy="0 0 0"/>\n    <axis xyz="0 0 1"/>\n    <limit lower="0" upper="2.35" effort="50" velocity="1"/>\n  </joint>\n\n  <link name="right_lower_leg">\n    <visual>\n      <geometry>\n        <cylinder length="0.4" radius="0.05"/>\n      </geometry>\n      <material name="red">\n        <color rgba="1 0 0 1"/>\n      </material>\n    </visual>\n    <collision>\n      <geometry>\n        <cylinder length="0.4" radius="0.05"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="2.5"/>\n      <inertia ixx="0.03" ixy="0" ixz="0" iyy="0.03" iyz="0" izz="0.01"/>\n    </inertial>\n  </link>\n</robot>\n'})}),"\n",(0,t.jsx)(e.h2,{id:"modifying-the-urdf",children:"Modifying the URDF"}),"\n",(0,t.jsx)(e.p,{children:"Let's modify our URDF to add sensors, which is a common requirement for humanoid robots. We'll add an IMU to the head link and a camera to the head as well:"}),"\n",(0,t.jsxs)(e.p,{children:["Update the ",(0,t.jsx)(e.code,{children:"head_link"})," section in the URDF to include sensor mountings:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-xml",children:'  \x3c!-- Head with sensors --\x3e\n  <joint name="neck_joint" type="revolute">\n    <parent link="base_link"/>\n    <child link="head_link"/>\n    <origin xyz="0 0 0.35" rpy="0 0 0"/>\n    <axis xyz="0 1 0"/>\n    <limit lower="-0.785" upper="0.785" effort="10" velocity="1"/>\n  </joint>\n\n  <link name="head_link">\n    <visual>\n      <geometry>\n        <sphere radius="0.1"/>\n      </geometry>\n      <material name="white">\n        <color rgba="1 1 1 1"/>\n      </material>\n    </visual>\n    <collision>\n      <geometry>\n        <sphere radius="0.1"/>\n      </geometry>\n    </collision>\n    <inertial>\n      <mass value="2.0"/>\n      <inertia ixx="0.04" ixy="0" ixz="0" iyy="0.04" iyz="0" izz="0.04"/>\n    </inertial>\n    \n    \x3c!-- IMU sensor --\x3e\n    <sensor name="imu_sensor">\n      <origin xyz="0.05 0 0" rpy="0 0 0"/>\n      <camera name="head_camera">\n        <pose>0.1 0 0 0 0 0</pose>\n        <horizontal_fov>1.047</horizontal_fov>\n        <image>\n          <width>640</width>\n          <height>480</height>\n        </image>\n        <clip>\n          <near>0.1</near>\n          <far>10.0</far>\n        </clip>\n      </camera>\n    </sensor>\n  </link>\n'})}),"\n",(0,t.jsxs)(e.p,{children:["Actually, the above is not a valid URDF format. Let me provide the correct way to add sensors using Gazebo plugins in a separate file. Create ",(0,t.jsx)(e.code,{children:"humanoid_agent/urdf/simple_humanoid.gazebo.xacro"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<robot xmlns:xacro="http://www.ros.org/wiki/xacro">\n  \x3c!-- IMU Sensor for Head --\x3e\n  <gazebo reference="head_link">\n    <sensor name="imu_sensor" type="imu">\n      <always_on>true</always_on>\n      <update_rate>100</update_rate>\n      <visualize>true</visualize>\n      <imu>\n        <angular_velocity>\n          <x>\n            <noise type="gaussian">\n              <mean>0.0</mean>\n              <stddev>2e-4</stddev>\n            </noise>\n          </x>\n          <y>\n            <noise type="gaussian">\n              <mean>0.0</mean>\n              <stddev>2e-4</stddev>\n            </noise>\n          </y>\n          <z>\n            <noise type="gaussian">\n              <mean>0.0</mean>\n              <stddev>2e-4</stddev>\n            </noise>\n          </z>\n        </angular_velocity>\n        <linear_acceleration>\n          <x>\n            <noise type="gaussian">\n              <mean>0.0</mean>\n              <stddev>1.7e-2</stddev>\n            </noise>\n          </x>\n          <y>\n            <noise type="gaussian">\n              <mean>0.0</mean>\n              <stddev>1.7e-2</stddev>\n            </noise>\n          </y>\n          <z>\n            <noise type="gaussian">\n              <mean>0.0</mean>\n              <stddev>1.7e-2</stddev>\n            </noise>\n          </z>\n        </linear_acceleration>\n      </imu>\n    </sensor>\n  </gazebo>\n  \n  \x3c!-- Camera Sensor for Head --\x3e\n  <gazebo reference="head_link">\n    <sensor name="head_camera" type="camera">\n      <update_rate>30</update_rate>\n      <camera name="head_camera">\n        <horizontal_fov>1.047</horizontal_fov>\n        <image>\n          <width>640</width>\n          <height>480</height>\n        </image>\n        <clip>\n          <near>0.1</near>\n          <far>10.0</far>\n        </clip>\n      </camera>\n      <always_on>true</always_on>\n      <visualize>true</visualize>\n    </sensor>\n  </gazebo>\n</robot>\n'})}),"\n",(0,t.jsx)(e.h2,{id:"hands-on-exercise-31-complete-python-agent-implementation",children:"Hands-on Exercise 3.1: Complete Python Agent Implementation"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["Complete the ",(0,t.jsx)(e.code,{children:"setup.py"})," file for the ",(0,t.jsx)(e.code,{children:"humanoid_agent"})," package:"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"from setuptools import setup\n\npackage_name = 'humanoid_agent'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=[package_name],\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n        # Add URDF files\n        ('share/' + package_name + '/urdf', [\n            'urdf/simple_humanoid.urdf',\n            'urdf/simple_humanoid.gazebo.xacro'\n        ]),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='your_name',\n    maintainer_email='your_email@example.com',\n    description='Python agent for controlling humanoid robot',\n    license='Apache License 2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'walking_agent = humanoid_agent.walking_agent:main',\n        ],\n    },\n)\n"})}),"\n",(0,t.jsxs)(e.ol,{start:"2",children:["\n",(0,t.jsx)(e.li,{children:"Build the package:"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"cd ~/humanoid_ws\ncolcon build --packages-select humanoid_agent\nsource install/setup.bash\n"})}),"\n",(0,t.jsxs)(e.ol,{start:"3",children:["\n",(0,t.jsx)(e.li,{children:"Run the walking agent:"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"ros2 run humanoid_agent walking_agent\n"})}),"\n",(0,t.jsx)(e.h2,{id:"hands-on-exercise-32-urdf-modification-task",children:"Hands-on Exercise 3.2: URDF Modification Task"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:"Add two more joints to the right arm of the humanoid (right shoulder and right elbow)"}),"\n",(0,t.jsx)(e.li,{children:"Create a second URDF file with a different walking stance (legs further apart)"}),"\n",(0,t.jsxs)(e.li,{children:["Verify that your URDF file is valid by using the check_urdf command:","\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"check_urdf path/to/your/urdf/file.urdf\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"validation-checklist",children:"Validation Checklist"}),"\n",(0,t.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","I have implemented a Python agent using rclpy that interfaces with ROS 2"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","I understand the structure and purpose of URDF in robot modeling"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","I have created and modified a simple humanoid URDF file"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","I have added sensor information to the URDF"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","I have tested that my Python agent can communicate with other ROS 2 nodes"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ","I have validated my URDF file for syntactic correctness"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(e.p,{children:"This chapter introduced Python agents for humanoid robot control using the rclpy client library. We created a walking agent that demonstrates how to connect sensor inputs to decision-making and control outputs. We also explored URDF, the standard format for describing robot models in ROS, including how to define links, joints, and sensors."}),"\n",(0,t.jsx)(e.p,{children:"The combination of Python agents and properly defined URDF files enables sophisticated control of humanoid robots, bridging the gap between high-level behavior and low-level hardware control. This foundation will be essential as we move into more advanced topics in the subsequent modules."}),"\n",(0,t.jsx)(e.p,{children:"Now that you've completed Module 1, you have a solid foundation in ROS 2 fundamentals, including node communication, Python agent development, and robot modeling with URDF."})]})}function m(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(c,{...n})}):c(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>r,x:()=>l});var t=i(6540);const a={},o=t.createContext(a);function r(n){const e=t.useContext(o);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:r(n.components),t.createElement(o.Provider,{value:e},n.children)}}}]);